<template>
    <require from="./components/filtered-select/filtered-select"></require>
  <div if.bind="bill">
  <h1>Add Bill</h1>
  <div class="shop-info">
    <p>Shop name: </p>
      <filtered-select items.two-way="shops" selected-item.two-way="bill.shop"></filtered-select>
  </div>
  <div class="shop-info">
    <p>Date: </p>
    <input type="text" value.bind="bill.dateStr">
  </div>
  <div class="bill-items">
    <div class="item" repeat.for="billItem of bill.items">
      <div class="bill-item-info">
        <p>Product:</p>
          <filtered-select items.two-way="products" selected-item.two-way="billItem.product"></filtered-select>
      </div>
      <div class="bill-item-info">
        <p>Price:</p>
        <input type="text" value.bind="billItem.price">
      </div>
      <div class="bill-item-info">
        <p>Amount:</p>
        <input type="text" value.bind="billItem.amount">
      </div>

    </div>
    <div class="item-button-panel">
      <button type="button" click.delegate="addBillItem()">Add item</button>
    </div>
  </div>
  <div class="bill-button-panel" if.bind="!bill.id">
    <button type="button" click.delegate="addBill()">Add bill</button>
  </div>
  <div class="bill-button-panel" if.bind="bill.id">
    <button type="button" click.delegate="updateBill()">Update bill</button>
  </div>
  </div>
</template>

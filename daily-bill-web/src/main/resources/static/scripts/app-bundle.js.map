{"version":3,"sources":["app.js","environment.js","main.js","daily-bill/add-bill.js","daily-bill/bill-details.js","daily-bill/bill-list.js","daily-bill/statistics.js","resources/index.js","daily-bill/service/daily-bill-service.js","daily-bill/components/filtered-select/filtered-select.js"],"names":["App","configureRouter","config","router","title","map","route","moduleId","name","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","AddBill","inject","dailyBillService","activate","params","routeConfig","console","log","id","self","getShops","response","json","data","shops","object","getProducts","prodData","products","getBillById","bill","initOpenBill","date","createBill","catch","error","attached","Date","dateStr","getFullYear","getMonth","getDate","shop","shopId","shopName","items","addBillItem","push","createDefaultBillItem","addBill","parse","navigateToRoute","updateBill","product","productId","productName","price","amount","BillDetails","billSum","forEach","element","edit","BillList","startDateStr","endDateStr","findBills","viewBillDetails","startDate","endDate","startPeriodDate","endPeriodDate","getBills","bills","Statistics","productNames","getStatisticsByProduct","names","it","filter","getStatisticByProduct","statisticsByProduct","updateStatistics","addProductName","httpClient","DailyBillService","fetch","method","body","FilteredSelect","filteredItems","selectedItem","filterValue","searchByFilterValue","filterValues","condition","s","toLowerCase","indexOf","filterChange","delimeter","split","i","value","find","index","array","filterSelectedItem","selectItem"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  configureRouter(config, router){\n    config.title = 'Daily Bill';\n    config.map([\n      { route: '',              moduleId: 'daily-bill/bill-list',   title: 'Bill List', name: 'billList'},\n      { route: 'bill/:id',  moduleId: 'daily-bill/bill-details', name:'billDetails' },\n      {route: 'bill/add', moduleId: 'daily-bill/add-bill', name: 'addBill'},\n      {route: 'bill/edit/:id', moduleId: 'daily-bill/add-bill', name: 'editBill'},\n      {route: 'statistics', moduleId: 'daily-bill/statistics', name: 'statistics'}\n    ]);\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class AddBill{\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n    }\n    activate(params, routeConfig) {\n        this.routeConfig = routeConfig;\n        console.log('activate add-bill');\n        console.log('params: ', params.id)\n        let self = this;\n\n        this.dailyBillService.getShops()\n            .then(response => response.json())\n                        .then(data => {\n                            console.log('shops: ')\n                            console.log(data)\n                            self.shops = data.object;\n                            return self.shops;\n                        }).then(shops => {\n                            return self.dailyBillService.getProducts()\n\n\n                        }).then(response => response.json())\n                        .then(prodData => {\n                                                              console.log('products: ')\n                                                              console.log(prodData);\n                                                              console.log(prodData.object);\n                                                              self.products = prodData.object\n                                                              return self.products;\n                                                          })\n                        .then(products => {\n                            if(params.id) {\n                                        return self.dailyBillService.getBillById(params.id)\n                                            .then(response => response.json())\n                                            .then(data => {\n                                                console.log('bill: ')\n                                                console.log(data.object)\n                                                self.bill = data.object;\n                                                self.initOpenBill();\n                                                console.log('bill date: ')\n                                                console.log(self.bill.date);\n                                                return self.bill;\n                                        });\n                            } else {\n                                this.createBill();\n                            }\n                        }).catch(error => {\n                            console.log('Error getting data')\n                            console.log(error)\n                            self.shops = [];\n                            self.products = [];\n                        })\n\n    }\n    attached() {\n        console.log('attached add-bill')\n    }\n    initOpenBill() {\n        let date = new Date(this.bill.date)\n        this.bill.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()\n    }\n  createBill() {\n    let date = new Date();\n    this.bill = {\n        id: null,\n        date: date,\n        dateStr: date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate(),\n        shop: {\n          shopId: null,\n          shopName: \"\"\n        },\n        items: [\n        ]\n      };\n    this.addBillItem()\n  }\n\n  addBillItem() {\n    console.log(\"add bill item\");\n    this.bill.items.push(this.createDefaultBillItem());\n  }\n\n  addBill() {\n    console.log(\"add bill:\");\n    this.bill.date = Date.parse(this.bill.dateStr);\n    console.log(this.bill);\n    let self = this;\n    this.dailyBillService.addBill(this.bill)\n        .then(response => response.json())\n        .then(data => {\n            console.log(data);\n            self.router.navigateToRoute('billList')\n        });;\n  }\n\n  updateBill() {\n      console.log(\"update bill:\");\n      this.bill.date = Date.parse(this.bill.dateStr);\n      console.log(this.bill);\n      let self = this;\n      this.dailyBillService.updateBill(this.bill)\n          .then(response => response.json())\n          .then(data => {\n              console.log(data);\n              self.router.navigateToRoute('billList')\n          });;\n    }\n\n  createDefaultBillItem() {\n    return {\n      product: {\n        productId: null,\n        productName: null\n      },\n      price: 0,\n      amount: 1\n    }\n  }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {json} from 'aurelia-fetch-client'\nimport {Router} from \"aurelia-router\"\nexport class BillDetails {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n    }\n\n    activate(params, routeConfig) {\n        this.routeConfig = routeConfig;\n        var self = this;\n        return this.dailyBillService.getBillById(params.id)\n            .then(response => response.json())\n            .then(data => {\n                console.log('bill: ')\n                console.log(data.object)\n                self.bill = data.object;\n                let date = new Date(data.object.date)\n                self.bill.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n                self.bill.billSum = 0;\n                self.bill.items.forEach(element => {\n                    self.bill.billSum += element.price * element.amount;\n                })\n          });\n    }\n    edit() {\n        this.router.navigateToRoute(\"editBill\", {id: this.bill.id});\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class BillList {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        let date = new Date();\n        this.startDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + 1;\n        this.endDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    }\n\n    activate(params, routeConfig) {\n        this.findBills();\n    }\n\n    viewBillDetails(id) {\n        console.log(\"viewBillDetails: \" + id);\n        this.router.navigateToRoute('billDetails', {id: id})\n    }\n\n    findBills() {\n        let startDate = Date.parse(this.startDateStr);\n        let endDate = Date.parse(this.endDateStr);\n        this.params = {\n            startPeriodDate: startDate,\n            endPeriodDate: endDate,\n        }\n        var self = this;\n        console.log('params get bill');\n        console.log(this.params)\n        this.dailyBillService.getBills(this.params)\n                    .then(response => response.json())\n                    .then(data => {\n                        console.log(data);\n                        self.bills = data.object;\n                        self.bills.forEach((element) => {\n                            let date = new Date(element.date);\n                            element.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n                        })\n                    });\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\n\nexport class Statistics {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n\n    constructor(dailyBillService, router) {\n    console.log('Init statistics module')\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        let date = new Date();\n        this.params = {\n            startPeriodDate: new Date(date.getFullYear(), date.getMonth(), 1),\n            endPeriodDate: date\n        }\n        // Aurelia doesn't support change of array in repeat.for\n        this.productNames = [{name: ''}];\n        this.startDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + 1;\n        this.endDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    }\n\n    activate(params, routeConfig) {\n        this.getStatisticsByProduct(this.params);\n    }\n\n    getStatisticsByProduct(params) {\n        let names = this.productNames.map(it => it.name).filter(it => it);\n        params.productNames = names;\n        console.log(params)\n        let self = this;\n        this.dailyBillService.getStatisticByProduct(params)\n                        .then(response => response.json())\n                        .then(data => {\n                            console.log(data);\n                            self.statisticsByProduct = data.object;\n                        });\n    }\n\n    updateStatistics() {\n        let startDate = Date.parse(this.startDateStr);\n        let endDate = Date.parse(this.endDateStr);\n        this.params = {\n            startPeriodDate: startDate,\n            endPeriodDate: endDate,\n        }\n        this.getStatisticsByProduct(this.params);\n    }\n\n    addProductName() {\n        this.productNames.push({name: ''});\n    }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient, json} from 'aurelia-fetch-client'\n//import {HttpClient} from 'aurelia-http-client'\n\nlet httpClient = new HttpClient();\n\nexport class DailyBillService {\n    constructor() {\n    }\n\n    getBills(params) {\n        console.log(\"Get bills\")\n        return httpClient.fetch('http://localhost:8080/daily-bill/bills', {\n                   method: \"POST\",\n                   body: json(params)\n            })\n    }\n\n    getBillById(id) {\n        console.log(\"Get bill by id: \" +id)\n        return httpClient.fetch('http://localhost:8080/daily-bill/bill/' + id)\n    }\n\n    addBill(bill) {\n        return httpClient.fetch('http://localhost:8080/daily-bill/add', {\n             method: \"PUT\",\n             body: json(bill)\n        })\n      }\n    updateBill(bill) {\n        return httpClient.fetch('http://localhost:8080/daily-bill/edit', {\n               method: \"POST\",\n               body: json(bill)\n        })\n    }\n\n    getShops() {\n        return httpClient.fetch('http://localhost:8080/daily-bill/shops')\n    }\n\n    getProducts() {\n        return httpClient.fetch('http://localhost:8080/daily-bill/products')\n    }\n\n    getStatisticByProduct(params) {\n        console.log('Getstatistic by product');\n        return httpClient.fetch('http://localhost:8080/daily-bill/statistics/product', {\n                   method: \"POST\",\n                   body: json(params)\n            })\n    }\n}\n","import {bindable, bindingMode} from 'aurelia-framework';\n\nexport class FilteredSelect {\n    @bindable selectedItem;\n    @bindable items;\n    constructor() {\n    }\n    attached() {\n        if(this.items) {\n            this.filteredItems = this.items;\n        }\n        if(this.selectedItem) {\n            this.filterValue = this.selectedItem.name;\n        }\n    }\n\n    searchByFilterValue(it, filterValues) {\n        let condition = true;\n        for(let s of filterValues) {\n           condition = condition && it.name.toLowerCase().indexOf(s.toLowerCase()) >= 0;\n        }\n        return condition;\n    }\n\n    filterChange() {\n        if(this.filterValue) {\n            let delimeter = /\\s+/;\n            let filterValues = this.filterValue.split(delimeter).filter(i => i !== '');\n            this.filteredItems = this.items.filter(it => this.searchByFilterValue(it, filterValues))\n        } else {\n            this.filteredItems = this.items;\n        }\n        let value = this.items.find((element, index, array) => element.name.toLowerCase() === this.filterValue.toLowerCase())\n        if(value) {\n            this.selectedItem = value;\n            this.filterSelectedItem = value;\n        } else {\n            this.selectedItem = {\n                id: null,\n                name: this.filterValue\n            }\n        }\n    }\n\n    selectItem() {\n        this.filterValue = this.filterSelectedItem.name;\n        this.selectedItem = this.filterSelectedItem;\n    }\n}\n"],"sourceRoot":"../src"}
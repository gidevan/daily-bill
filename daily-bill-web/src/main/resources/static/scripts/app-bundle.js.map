{"version":3,"sources":["app.js","environment.js","main.js","daily-bill/add-bill.js","daily-bill/bill-details.js","daily-bill/bill-list.js","daily-bill/statistics.js","resources/index.js","daily-bill/service/daily-bill-service.js"],"names":["App","configureRouter","config","router","title","map","route","moduleId","name","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","AddBill","inject","dailyBillService","createBill","products","shops","activate","params","routeConfig","console","log","id","self","getShops","response","json","data","object","getProducts","prodData","getBillById","bill","initOpenBill","date","Date","dateStr","getFullYear","getMonth","getDate","shop","shopId","shopName","items","addBillItem","push","createDefaultBillItem","addBill","parse","navigateToRoute","updateBill","product","productId","productName","price","amount","productChange","billItem","changedValue","selectedProduct","shopChange","selectedShop","shopNameChange","toLowerCase","find","element","index","array","productNameChange","BillDetails","billSum","forEach","edit","BillList","getBills","bills","viewBillDetails","Statistics","startPeriodDate","endPeriodDate","startDateStr","endDateStr","getStatisticsByProduct","getStatisticByProduct","statisticsByProduct","updateStatistics","startDate","endDate","httpClient","DailyBillService","fetch","method","body"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  configureRouter(config, router){\n    config.title = 'Daily Bill';\n    config.map([\n      { route: '',              moduleId: 'daily-bill/bill-list',   title: 'Bill List', name: 'billList'},\n      { route: 'bill/:id',  moduleId: 'daily-bill/bill-details', name:'billDetails' },\n      {route: 'bill/add', moduleId: 'daily-bill/add-bill', name: 'addBill'},\n      {route: 'bill/edit/:id', moduleId: 'daily-bill/add-bill', name: 'editBill'},\n      {route: 'statistics', moduleId: 'daily-bill/statistics', name: 'statistics'}\n    ]);\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class AddBill{\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        this.createBill();\n        this.products = [];\n        this.shops = [];\n    }\n    activate(params, routeConfig) {\n        this.routeConfig = routeConfig;\n        console.log('activate add-bill');\n        console.log('params: ', params.id)\n        let self = this;\n\n        this.dailyBillService.getShops().then(response => response.json())\n                        .then(data => {\n                            console.log('shops: ')\n                            console.log(data)\n                            self.shops = data.object;\n                            self.dailyBillService.getProducts().then(response => response.json())\n                                .then(prodData => {\n                                    console.log('products: ')\n                                    console.log(prodData);\n                                    console.log(prodData.object);\n                                    self.products = prodData.object})\n                        })\n        if(params.id) {\n            let self = this;\n            this.dailyBillService.getBillById(params.id)\n                .then(response => response.json())\n                .then(data => {\n                    console.log('bill: ')\n                    console.log(data.object)\n                    self.bill = data.object;\n                    self.initOpenBill();\n                    console.log('bill date: ')\n                    console.log(self.bill.date);\n            });\n        } else {\n            this.createBill();\n        }\n    }\n    initOpenBill() {\n        let date = new Date(this.bill.date)\n        this.bill.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()\n    }\n  createBill() {\n    let date = new Date();\n    this.bill = {\n        id: null,\n        date: date,\n        dateStr: date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate(),\n        shop: {\n          shopId: null,\n          shopName: \"\"\n        },\n        items: [\n        ]\n      };\n    this.addBillItem()\n  }\n\n  addBillItem() {\n    console.log(\"add bill item\");\n    this.bill.items.push(this.createDefaultBillItem());\n  }\n\n  addBill() {\n    console.log(\"add bill:\");\n    this.bill.date = Date.parse(this.bill.dateStr);\n    console.log(this.bill);\n    let self = this;\n    this.dailyBillService.addBill(this.bill)\n        .then(response => response.json())\n        .then(data => {\n            console.log(data);\n            self.router.navigateToRoute('billList')\n        });;\n  }\n\n  updateBill() {\n      console.log(\"update bill:\");\n      this.bill.date = Date.parse(this.bill.dateStr);\n      console.log(this.bill);\n      let self = this;\n      this.dailyBillService.updateBill(this.bill)\n          .then(response => response.json())\n          .then(data => {\n              console.log(data);\n              self.router.navigateToRoute('billList')\n          });;\n    }\n\n  createDefaultBillItem() {\n    return {\n      product: {\n        productId: null,\n        productName: null\n      },\n      price: 0,\n      amount: 1\n    }\n  }\n\n  productChange(billItem) {\n    console.log('Change product value:');\n    let changedValue = billItem.selectedProduct;\n    console.log(changedValue);\n    console.log(changedValue.id + \" \" + changedValue.name);\n    billItem.product.id = changedValue.id;\n    billItem.product.name = changedValue.name;\n  }\n\n  shopChange() {\n      console.log('Change shop value:');\n      this.bill.shop.id = this.selectedShop.id;\n      this.bill.shop.name = this.selectedShop.name;\n  }\n\n  shopNameChange() {\n     console.log('shop name change')\n     let shopName = this.bill.shop.name.toLowerCase();\n     console.log('new: ' + shopName)\n     let shop = this.shops.find((element, index, array) => element.name.toLowerCase() === shopName)\n     if(shop) {\n        this.bill.shop.id = shop.id;\n        this.bill.shop.name = shop.name;\n        this.selectedShop = shop;\n     } else {\n        this.bill.shop.id = null;\n     }\n  }\n\n    productNameChange(billItem) {\n        console.log('product name change')\n        let productName = billItem.product.name.toLowerCase();\n        console.log('bill item product')\n        console.log(productName)\n        let product = this.products.find((element, index, array) => element.name.toLowerCase() === productName)\n        if(product) {\n            billItem.product.id = product.id;\n            billItem.product.name = product.name;\n            billItem.selectedProduct = product;\n        } else {\n            billItem.product.id = null;\n        }\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {json} from 'aurelia-fetch-client'\nimport {Router} from \"aurelia-router\"\nexport class BillDetails {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n    }\n\n    activate(params, routeConfig) {\n        this.routeConfig = routeConfig;\n        var self = this;\n        return this.dailyBillService.getBillById(params.id)\n            .then(response => response.json())\n            .then(data => {\n                console.log('bill: ')\n                console.log(data.object)\n                self.bill = data.object;\n                let date = new Date(data.object.date)\n                self.bill.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n                self.bill.billSum = 0;\n                self.bill.items.forEach(element => {\n                    self.bill.billSum += element.price * element.amount;\n                })\n          });\n    }\n    edit() {\n        this.router.navigateToRoute(\"editBill\", {id: this.bill.id});\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class BillList {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n    }\n\n    activate(params, routeConfig) {\n    var self = this;\n        this.dailyBillService.getBills()\n            .then(response => response.json())\n            .then(data => {\n                console.log(data);\n                self.bills = data.object;\n                self.bills.forEach((element) => {\n                    let date = new Date(element.date);\n                    element.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n                })\n            });\n    }\n\n    viewBillDetails(id) {\n        console.log(\"viewBillDetails: \" + id);\n        this.router.navigateToRoute('billDetails', {id: id})\n\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\n\nexport class Statistics {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n\n    constructor(dailyBillService, router) {\n    console.log('Init statistics module')\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        let date = new Date();\n        this.params = {\n            startPeriodDate: new Date(date.getFullYear(), date.getMonth(), 1),\n            endPeriodDate: date\n        }\n        this.startDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + 1;\n        this.endDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    }\n\n    activate(params, routeConfig) {\n        this.getStatisticsByProduct(this.params);\n    }\n\n    getStatisticsByProduct(params) {\n        console.log('get statistics')\n        console.log(params)\n        let self = this;\n        this.dailyBillService.getStatisticByProduct(params)\n                        .then(response => response.json())\n                        .then(data => {\n                            console.log(data);\n                            self.statisticsByProduct = data.object;\n                        });\n    }\n\n    updateStatistics() {\n        let startDate = Date.parse(this.startDateStr);\n        let endDate = Date.parse(this.endDateStr);\n        console.log('update statistics')\n        console.log(startDate, endDate)\n        this.params = {\n            startPeriodDate: startDate,\n            endPeriodDate: endDate\n        }\n        this.getStatisticsByProduct(this.params);\n    }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient, json} from 'aurelia-fetch-client'\n//import {HttpClient} from 'aurelia-http-client'\n\nlet httpClient = new HttpClient();\n\nexport class DailyBillService {\n    constructor() {\n    }\n\n    getBills() {\n        console.log(\"Get bills\")\n        return httpClient.fetch('http://localhost:8080/daily-bill/bills')\n    }\n\n    getBillById(id) {\n        console.log(\"Get bill by id: \" +id)\n        return httpClient.fetch('http://localhost:8080/daily-bill/bill/' + id)\n    }\n\n    addBill(bill) {\n        return httpClient.fetch('http://localhost:8080/daily-bill/add', {\n             method: \"PUT\",\n             body: json(bill)\n        })\n      }\n    updateBill(bill) {\n        return httpClient.fetch('http://localhost:8080/daily-bill/edit', {\n               method: \"POST\",\n               body: json(bill)\n        })\n    }\n\n    getShops() {\n        return httpClient.fetch('http://localhost:8080/daily-bill/shops')\n    }\n\n    getProducts() {\n        return httpClient.fetch('http://localhost:8080/daily-bill/products')\n    }\n\n    getStatisticByProduct(params) {\n        console.log('Getstatistic by product');\n        return httpClient.fetch('http://localhost:8080/daily-bill/statistics/product', {\n                   method: \"POST\",\n                   body: json(params)\n            })\n    }\n}\n"],"sourceRoot":"../src"}
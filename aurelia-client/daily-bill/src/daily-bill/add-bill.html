<template>
  <h1>Add Bill</h1>
  <div class="shop-info">
    <p>Shop ID: </p>
    <div >${bill.shop.id}</div>
  </div>
  <div class="shop-info">
    <p>Shop name: </p>
    <input type="text" value.bind="bill.shop.name" change.delegate="shopNameChange()">
    <select value.bind="selectedShop" change.delegate="shopChange()">
      <option model.bind="null">Choose...</option>
      <option repeat.for="shop of shops" model.bind="shop">${shop.name}</option>
    </select>
  </div>
  <div class="shop-info">
    <p>Date: </p>
    <input type="text" value.bind="bill.dateStr">
  </div>
  <div class="bill-items">
    <div class="item" repeat.for="billItem of bill.items">
      <div class="bill-item-info">
        <p>Product:</p>
        <input type="text" value.bind="billItem.product.name" chamge.delegate="productNameChange(billItem)">
        <select value.bind="billItem.selectedProduct" change.delegate="productChange(billItem)">
          <option model.bind="null">Choose...</option>
          <option repeat.for="product of products" model.bind="product">${product.name}</option>
        </select>
      </div>
      <div class="bill-item-info">
        <p>Product ID:</p>
        <div>${billItem.product.id}</div>
      </div>
      <div>selected product id:</div><div>${billItem.selectedProduct.id}</div>
      <div class="bill-item-info">
        <p>Price:</p>
        <input type="text" value.bind="billItem.price">
      </div>
      <div class="bill-item-info">
        <p>Count:</p>
        <input type="text" value.bind="billItem.countItem">
      </div>

    </div>
    <div class="item-button-panel">
      <button type="button" click.delegate="addBillItem()">Add item</button>
    </div>
  </div>
  <div class="bill-button-panel" if.bind="!bill.id">
    <button type="button" click.delegate="addBill()">Add bill</button>
  </div>
  <div class="bill-button-panel" if.bind="bill.id">
    <button type="button" click.delegate="updateBill()">Update bill</button>
  </div>
</template>

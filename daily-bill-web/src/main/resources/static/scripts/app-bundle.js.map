{"version":3,"sources":["app.js","environment.js","main.js","daily-bill/add-bill.js","daily-bill/bill-details.js","daily-bill/bill-list.js","daily-bill/statistics-by-product.js","daily-bill/statistics-by-shop.js","resources/index.js","daily-bill/currency/currency-list.js","daily-bill/product/product-item.js","daily-bill/product/product-list.js","daily-bill/service/daily-bill-service.js","daily-bill/shop/shop-item.js","daily-bill/shop/shop-list.js","daily-bill/components/bill-item/edit-bill-item.js","daily-bill/components/filtered-select/filtered-select.js"],"names":["App","configureRouter","config","router","title","map","route","moduleId","name","debug","testing","dailyBillUrl","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","AddBill","inject","dailyBillService","activate","params","routeConfig","console","log","id","changeCurrency","self","messages","getShops","response","json","data","shops","object","getProducts","prodData","products","getAllCurrencies","currenciesData","currencies","getBillById","bill","initOpenBill","date","createBill","catch","error","attached","Date","dateStr","getFullYear","getMonth","getDate","defaultCurrency","find","c","currency","shop","shopId","shopName","items","addBillItem","push","createDefaultBillItem","addBill","parse","validateBill","length","status","navigateToRoute","msg","code","message","filteredItems","filter","el","product","forEach","isNaN","item","price","amount","updateBill","productId","productName","BillDetails","billSum","element","edit","BillList","startDateStr","endDateStr","findBills","viewBillDetails","startDate","endDate","startPeriodDate","endPeriodDate","getBills","bills","StatisticsByProduct","productNames","selectedCurrency","fullStatiscicInfo","statisticsByProduct","getStatisticsByProduct","names","it","getStatisticByProduct","fullStatisticInfo","active","isCurrencyExists","statisticInfo","statisticDetails","allEnabled","totalSumCalculated","totalSum","updateStatistics","switchItem","statisticsItem","addProductName","switchItems","StatisticsByShop","shopNames","statisticsByShop","getStatisticsByShop","getStatisticByShop","addShopName","CurrencyList","initCurrencies","errorMessages","e","editCurrency","ProductItem","initProduct","getProductById","updateProduct","ProductList","initProducts","filterValue","filteredProducts","getAllProducts","editProduct","filterChange","toLowerCase","indexOf","httpClient","DailyBillService","fetch","method","body","url","findLastPrice","getAllShops","getShopById","updateShop","ShopItem","initShop","ShopList","initShops","filteredShops","editShop","EditBillItem","lastPrice","billItem","FilteredSelect","selectedItem","searchByFilterValue","filterValues","condition","s","delimeter","split","i","value","index","array","filterSelectedItem","selectItem","callbackFn"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n configureRouter(config, router){\n    config.title = 'Daily Bill';\n    config.map([\n        { route: '',              moduleId: 'daily-bill/bill-list',   title: 'Bill List', name: 'billList'},\n        { route: 'bill/:id',  moduleId: 'daily-bill/bill-details', name:'billDetails' },\n        {route: 'bill/add', moduleId: 'daily-bill/add-bill', name: 'addBill'},\n        {route: 'bill/edit/:id', moduleId: 'daily-bill/add-bill', name: 'editBill'},\n        {route: 'statistics-by-product', moduleId: 'daily-bill/statistics-by-product', name: 'statistics-by-product'},\n        {route: 'statistics-by-shop', moduleId: 'daily-bill/statistics-by-shop', name: 'statistics-by-shop'},\n        {route: 'product/list', moduleId: 'daily-bill/product/product-list', name: 'product-list'},\n        {route: 'product/edit/:id', moduleId: 'daily-bill/product/product-item', name: 'product-item'},\n        {route: 'shop/list', moduleId: 'daily-bill/shop/shop-list', name: 'shop-list'},\n        {route: 'shop/edit/:id', moduleId: 'daily-bill/shop/shop-item', name: 'shop-item'},\n        {route: 'currency/list', moduleId: 'daily-bill/currency/currency-list', name: 'currency-list'}\n    ]);\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  dailyBillUrl: 'http://localhost:8080'\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class AddBill{\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n    }\n    activate(params, routeConfig) {\n        this.routeConfig = routeConfig;\n        console.log('activate add-bill');\n        console.log('params: ', params.id)\n        this.changeCurrency = false;\n        let self =this;\n        this.messages = [];\n        this.dailyBillService.getShops()\n            .then(response => response.json())\n                        .then(data => {\n                            console.log('shops: ')\n                            console.log(data)\n                            self.shops = data.object;\n                            return self.shops;\n                        }).then(shops => {\n                            return self.dailyBillService.getProducts()\n\n\n                        }).then(response => response.json())\n                        .then(prodData => {\n                                                              console.log('products: ')\n                                                              console.log(prodData);\n                                                              console.log(prodData.object);\n                                                              self.products = prodData.object\n                                                              return self.products;\n                                                          })\n                        .then(products => self.dailyBillService.getAllCurrencies())\n                                                .then(response => response.json())\n                                                .then(currenciesData => {\n                                                    console.log('Currencies: ');\n                                                    console.log(currenciesData);\n                                                    self.currencies = currenciesData.object;\n\n                                                })\n                        .then(products => {\n                            if(params.id) {\n                                        return self.dailyBillService.getBillById(params.id)\n                                            .then(response => response.json())\n                                            .then(data => {\n                                                console.log('bill: ')\n                                                console.log(data.object)\n                                                self.bill = data.object;\n                                                self.initOpenBill();\n                                                console.log('bill date: ')\n                                                console.log(self.bill.date);\n                                                return self.bill;\n                                        });\n                            } else {\n                                this.createBill();\n                            }\n\n                        }).catch(error => {\n                            console.log('Error getting data')\n                            console.log(error)\n                            self.shops = [];\n                            self.products = [];\n                        })\n\n    }\n    attached() {\n        console.log('attached add-bill')\n    }\n    initOpenBill() {\n        let date = new Date(this.bill.date)\n        this.bill.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()\n    }\n  createBill() {\n    let date = new Date();\n    let defaultCurrency = this.currencies.find(c => c.defaultCurrency == true);\n    console.log('defaultCurrency', defaultCurrency);\n    this.bill = {\n        id: null,\n        date: date,\n        dateStr: date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate(),\n        currency: defaultCurrency,\n        shop: {\n          shopId: null,\n          shopName: \"\"\n        },\n        items: [\n        ]\n      };\n    this.addBillItem()\n  }\n\n  addBillItem() {\n    console.log(\"add bill item\");\n    this.bill.items.push(this.createDefaultBillItem());\n  }\n\n  addBill() {\n    console.log(\"add bill:\");\n    this.bill.date = Date.parse(this.bill.dateStr);\n    console.log(this.bill);\n    this.validateBill();\n    if(this.messages.length == 0) {\n        console.log('bill to save:');\n        console.log(this.bill);\n        let self = this;\n        this.dailyBillService.addBill(this.bill)\n                .then(response => response.json())\n                .then(data => {\n                    console.log(\"add bill result\");\n                    console.log(data);\n                    if (data.status == \"OK\") {\n                        self.router.navigateToRoute('billList');\n                    } else {\n                        let msg = \"Error during add bill. Error code: [\" + data.code + \"], error status: [\"\n                                + data.status + \"], error message: [\" + data.message + \"]\";\n                        self.messages.push(msg);\n                    }\n\n                });\n    }\n\n  }\n\n  validateBill() {\n  this.messages = [];\n     if (!this.bill.shop.name) {\n        this.messages.push(\"Shop is empty\");\n     }\n     let filteredItems = this.bill.items.filter(el => el.product.id);\n     this.bill.items = filteredItems;\n     this.bill.items.forEach(item => {\n        if(isNaN(item.price)) {\n             this.messages.push(\"Price of product [\" + item.product.name + \"] is not number: [\" + item.price + \"]\");\n        }\n        if(isNaN(item.amount)) {\n             this.messages.push(\"Amount of product [\" + item.product.name + \"] is not number: [\" + item.amount + \"]\");\n        }\n     })\n  }\n\n  updateBill() {\n      console.log(\"update bill:\");\n      this.bill.date = Date.parse(this.bill.dateStr);\n      console.log(this.bill);\n      let self = this;\n      this.validateBill();\n      if (this.messages.length == 0) {\n            this.dailyBillService.updateBill(this.bill)\n                      .then(response => response.json())\n                      .then(data => {\n                          console.log(\"update bill result\");\n                          console.log(data);\n                          if (data.status == \"OK\") {\n                                self.router.navigateToRoute('billList');\n                          } else {\n\n                                let msg = \"Error during update bill. Error code: [\" + data.code + \"], error status: [\"\n                                                                + data.status + \"], error message: [\" + data.message + \"]\";\n                                self.messages.push(msg);\n                          }\n\n                      });\n      }\n\n    }\n\n  createDefaultBillItem() {\n    return {\n      product: {\n        productId: null,\n        productName: null\n      },\n      price: 0,\n      amount: 1\n    }\n  }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {json} from 'aurelia-fetch-client'\nimport {Router} from \"aurelia-router\"\nexport class BillDetails {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n    }\n\n    activate(params, routeConfig) {\n        this.routeConfig = routeConfig;\n        var self = this;\n        return this.dailyBillService.getBillById(params.id)\n            .then(response => response.json())\n            .then(data => {\n                console.log('bill: ')\n                console.log(data.object)\n                self.bill = data.object;\n                let date = new Date(data.object.date)\n                self.bill.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n                self.bill.billSum = 0;\n                self.bill.items.forEach(element => {\n                    self.bill.billSum += element.price * element.amount;\n                })\n          });\n    }\n    edit() {\n        this.router.navigateToRoute(\"editBill\", {id: this.bill.id});\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class BillList {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        let date = new Date();\n        this.startDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + 1;\n        this.endDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    }\n\n    activate(params, routeConfig) {\n        this.findBills();\n    }\n\n    viewBillDetails(id) {\n        console.log(\"viewBillDetails: \" + id);\n        this.router.navigateToRoute('billDetails', {id: id})\n    }\n\n    findBills() {\n        let startDate = Date.parse(this.startDateStr);\n        let endDate = Date.parse(this.endDateStr);\n        this.params = {\n            startPeriodDate: startDate,\n            endPeriodDate: endDate,\n        }\n        var self = this;\n        console.log('params get bill');\n        console.log(this.params)\n        this.dailyBillService.getBills(this.params)\n                    .then(response => response.json())\n                    .then(data => {\n                        console.log(data);\n                        self.bills = data.object;\n                        self.bills.forEach((element) => {\n                            let date = new Date(element.date);\n                            element.dateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n                        })\n                    });\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\n\nexport class StatisticsByProduct {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n\n    constructor(dailyBillService, router) {\n        console.log('Init statistics by product module')\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        let date = new Date();\n        this.params = {\n            startPeriodDate: new Date(date.getFullYear(), date.getMonth(), 1),\n            endPeriodDate: date\n        }\n        // Aurelia doesn't support change of array in repeat.for\n        this.productNames = [{name: ''}];\n        this.startDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + 1;\n        this.endDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n        this.selectedCurrency = null;\n        this.currencies = [];\n        this.fullStatiscicInfo = null;\n        this.statisticsByProduct = [];\n    }\n\n    activate(params, routeConfig) {\n        this.getStatisticsByProduct(this.params);\n    }\n\n    getStatisticsByProduct(params) {\n        let names = this.productNames.map(it => it.name).filter(it => it);\n        params.productNames = names;\n        console.log(params)\n        this.statisticsByProduct = {}\n        let self = this;\n        this.dailyBillService.getStatisticByProduct(params)\n                        .then(response => response.json())\n                        .then(data => {\n                            console.log(data);\n                            self.fullStatisticInfo = data.object;\n                            let currencies = self.fullStatisticInfo.currencies;\n                            if (currencies.length > 0) {\n\n                                self.currencies = currencies.map(it => {return {name: it, active: false}});\n                                if(!self.selectedCurrency) {\n                                    self.selectedCurrency = self.currencies[0].name;\n                                    self.currencies[0].active = true;\n                                } else {\n                                    let isCurrencyExists = false;\n                                    self.currencies.forEach(it => {\n                                        if (it.name == self.selectedCurrency) {\n                                            it.active = true;\n                                            isCurrencyExists = true;\n                                        }\n                                    })\n                                    if(!isCurrencyExists) {\n                                        self.selectedCurrency = self.currencies[0].name;\n                                        self.currencies[0].active = true;\n                                    }\n                                }\n\n\n                                self.statisticsByProduct = self.fullStatisticInfo.statisticInfo[self.selectedCurrency];\n                                self.statisticsByProduct.statisticDetails.map(it => {\n                                                                it.active = true;\n                                                                return it;\n                                });\n\n                                self.statisticsByProduct.allEnabled = true;\n                                self.statisticsByProduct.totalSumCalculated = self.statisticsByProduct.totalSum;\n                            }\n                        });\n    }\n\n    updateStatistics() {\n        let startDate = Date.parse(this.startDateStr);\n        let endDate = Date.parse(this.endDateStr);\n        this.params = {\n            startPeriodDate: startDate,\n            endPeriodDate: endDate,\n        }\n        this.getStatisticsByProduct(this.params);\n    }\n\n    changeCurrency(currency) {\n        this.currencies.forEach(it => it.name != currency.name ? it.active = false : it.active = true);\n        this.selectedCurrency = currency.name;\n        this.updateStatistics();\n    }\n\n    switchItem(statisticsItem) {\n        statisticsItem.active = !statisticsItem.active;\n        this.statisticsByProduct.totalSumCalculated = !statisticsItem.active\n                ? this.statisticsByProduct.totalSumCalculated - statisticsItem.price\n                : this.statisticsByProduct.totalSumCalculated + statisticsItem.price;\n    }\n\n    addProductName() {\n        this.productNames.push({name: ''});\n    }\n\n    switchItems() {\n        this.statisticsByProduct.allEnabled = !this.statisticsByProduct.allEnabled;\n        this.statisticsByProduct.totalSumCalculated = !this.statisticsByProduct.allEnabled ? 0 : this.statisticsByProduct.totalSum;\n        let self = this;\n        this.statisticsByProduct.statisticDetails.map(it => {\n            it.active = self.statisticsByProduct.allEnabled;\n        })\n    }\n}\n","import {DailyBillService} from \"./service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\n\nexport class StatisticsByShop {\n    static inject() {\n        return [DailyBillService, Router]\n    }\n\n    constructor(dailyBillService, router) {\n        console.log('Init statistics by shop module')\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        let date = new Date();\n        this.params = {\n            startPeriodDate: new Date(date.getFullYear(), date.getMonth(), 1),\n            endPeriodDate: date\n        }\n        // Aurelia doesn't support change of array in repeat.for\n        this.shopNames = [{name: ''}];\n        this.startDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + 1;\n        this.endDateStr = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n        this.selectedCurrency = null;\n        this.currencies = [];\n        this.fullStatiscicInfo = null;\n        this.statisticsByShop = [];\n    }\n\n    activate(params, routeConfig) {\n        this.getStatisticsByShop(this.params);\n    }\n\n    getStatisticsByShop(params) {\n        let names = this.shopNames.map(it => it.name).filter(it => it);\n        params.shopNames = names;\n        console.log(params)\n        this.statisticsByShop = {}\n        let self = this;\n        this.dailyBillService.getStatisticByShop(params)\n                        .then(response => response.json())\n                        .then(data => {\n                            console.log(data);\n                            self.fullStatisticInfo = data.object;\n                            let currencies = self.fullStatisticInfo.currencies;\n                            if (currencies.length > 0) {\n\n                                self.currencies = currencies.map(it => {return {name: it, active: false}});\n                                if(!self.selectedCurrency) {\n                                    self.selectedCurrency = self.currencies[0].name;\n                                    self.currencies[0].active = true;\n                                } else {\n                                    let isCurrencyExists = false;\n                                    self.currencies.forEach(it => {\n                                        if (it.name == self.selectedCurrency) {\n                                            it.active = true;\n                                            isCurrencyExists = true;\n                                        }\n                                    })\n                                    if(!isCurrencyExists) {\n                                        self.selectedCurrency = self.currencies[0].name;\n                                        self.currencies[0].active = true;\n                                    }\n                                }\n\n\n                                self.statisticsByShop = self.fullStatisticInfo.statisticInfo[self.selectedCurrency];\n                                self.statisticsByShop.statisticDetails.map(it => {\n                                                                it.active = true;\n                                                                return it;\n                                });\n\n                                self.statisticsByShop.allEnabled = true;\n                                self.statisticsByShop.totalSumCalculated = self.statisticsByShop.totalSum;\n                            }\n                        });\n    }\n\n    updateStatistics() {\n        let startDate = Date.parse(this.startDateStr);\n        let endDate = Date.parse(this.endDateStr);\n        this.params = {\n            startPeriodDate: startDate,\n            endPeriodDate: endDate,\n        }\n        this.getStatisticsByShop(this.params);\n    }\n\n    changeCurrency(currency) {\n        this.currencies.forEach(it => it.name != currency.name ? it.active = false : it.active = true);\n        this.selectedCurrency = currency.name;\n        this.updateStatistics();\n    }\n\n    switchItem(statisticsItem) {\n        statisticsItem.active = !statisticsItem.active;\n        this.statisticsByShop.totalSumCalculated = !statisticsItem.active\n                ? this.statisticsByShop.totalSumCalculated - statisticsItem.price\n                : this.statisticsByShop.totalSumCalculated + statisticsItem.price;\n    }\n\n    addShopName() {\n        this.shopNames.push({name: ''});\n    }\n\n    switchItems() {\n        this.statisticsByShop.allEnabled = !this.statisticsByShop.allEnabled;\n        this.statisticsByShop.totalSumCalculated = !this.statisticsByShop.allEnabled ? 0 : this.statisticsByShop.totalSum;\n        let self = this;\n        this.statisticsByShop.statisticDetails.map(it => {\n            it.active = self.statisticsByShop.allEnabled;\n        })\n    }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {DailyBillService} from \"../service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class CurrencyList {\n    static inject() {\n            return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        this.initCurrencies();\n    }\n\n    initCurrencies() {\n        let self = this;\n        this.currencies = [];\n        this.dailyBillService.getAllCurrencies()\n                .then(response => response.json())\n                .then(data => {\n                    self.currencies = data.object;\n                }).catch(e => {\n                    self.errorMessages.push(e)\n                })\n    }\n\n    editCurrency(id) {\n        console.log(\"edit currency: \" + id);\n    }\n\n\n}\n","import {DailyBillService} from \"../service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\n\nexport class ProductItem {\n    static inject() {\n         return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n\n    }\n\n    activate(params, routeConfig) {\n        let id = params.id;\n        this.initProduct(id)\n    }\n\n    initProduct(id) {\n        this.errorMessages = [];\n        let self = this;\n        this.dailyBillService.getProductById(id)\n            .then(response => response.json())\n            .then(data => {\n                self.product = data.object;\n                console.log(\"product:\", self.product)\n            }).catch(e => {\n                console.log(\"error get bill:\" + e);\n            })\n    }\n\n    updateProduct() {\n        this.errorMessages = [];\n        let self = this;\n        this.dailyBillService.updateProduct(this.product)\n            .then(response => response.json())\n            .then(data => {\n                console.log(\"update product result\");\n                console.log(data);\n                if(data.code == '200'){\n                    this.router.navigateToRoute('product-list')\n                } else {\n                    self.errorMessages.push(data.message)\n                }\n            })\n    }\n}\n","import {DailyBillService} from \"../service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class ProductList {\n    static inject() {\n            return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        this.initProducts();\n        this.filterValue = \"\";\n    }\n\n    initProducts() {\n        let self = this;\n        this.errorMessages = [];\n        this.products = [];\n        this.filteredProducts = [];\n        this.dailyBillService.getAllProducts()\n                .then(response => response.json())\n                .then(data => {\n                    self.products = data.object;\n                    self.filteredProducts = data.object;\n                }).catch(e => {\n                    self.errorMessages.push(e)\n                })\n    }\n\n    editProduct(id) {\n        this.router.navigateToRoute('product-item', {id: id})\n    }\n\n    filterChange() {\n        if (this.filterValue) {\n            this.filteredProducts = this.products.filter(it => it.name.toLowerCase().indexOf(this.filterValue.toLowerCase()) >=0);\n        } else {\n            this.filteredProducts = this.products;\n        }\n    }\n}\n","import {HttpClient, json} from 'aurelia-fetch-client'\nimport environment from '../../environment'\n\nlet httpClient = new HttpClient();\n\nexport class DailyBillService {\n    constructor() {\n        console.log('environment:' + environment.dailyBillUrl);\n    }\n\n    getBills(params) {\n        console.log(\"Get bills\")\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/bills', {\n                   method: \"POST\",\n                   body: json(params)\n            })\n    }\n\n    getBillById(id) {\n        console.log(\"Get bill by id: \" +id)\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/bill/' + id)\n    }\n\n    addBill(bill) {\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/add', {\n             method: \"PUT\",\n             body: json(bill)\n        })\n      }\n    updateBill(bill) {\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/edit', {\n               method: \"POST\",\n               body: json(bill)\n        })\n    }\n\n    getShops() {\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/shops')\n    }\n\n    getProducts() {\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/products')\n    }\n\n    getStatisticByProduct(params) {\n        let url = environment.dailyBillUrl + '/daily-bill/statistics/product';\n        console.log(\"url: \" + url);\n        return httpClient.fetch(url, {\n                   method: \"POST\",\n                   body: json(params)\n            })\n    }\n\n    getStatisticByShop(params) {\n            let url = environment.dailyBillUrl + '/daily-bill/statistics/shop';\n            return httpClient.fetch(url, {\n                       method: \"POST\",\n                       body: json(params)\n                })\n        }\n\n    findLastPrice(shopId, productId) {\n        return httpClient.fetch(environment.dailyBillUrl + '/daily-bill/last/price/shop/' + shopId + '/product/' + productId)\n    }\n\n    getAllShops(){\n        return httpClient.fetch(environment.dailyBillUrl + \"/shops/all\")\n    }\n\n    getShopById(id) {\n        return httpClient.fetch(environment.dailyBillUrl + \"/shops/\" + id)\n    }\n\n    updateShop(shop) {\n        return httpClient.fetch(environment.dailyBillUrl + \"/shops\", {\n            method: \"POST\",\n            body: json(shop)\n        })\n    }\n\n    getAllProducts(){\n        return httpClient.fetch(environment.dailyBillUrl + \"/products/all\")\n    }\n\n    getProductById(id) {\n        return httpClient.fetch(environment.dailyBillUrl + \"/products/\" + id)\n    }\n\n    updateProduct(product) {\n        return httpClient.fetch(environment.dailyBillUrl + \"/products\", {\n                method: \"POST\",\n                body: json(product)\n        })\n    }\n\n    getAllCurrencies() {\n        return httpClient.fetch(environment.dailyBillUrl + \"/currency/all\")\n    }\n}\n","import {DailyBillService} from \"../service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\n\nexport class ShopItem {\n    static inject() {\n         return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        this.errorMessages = [];\n    }\n\n    activate(params, routeConfig) {\n        let id = params.id;\n        this.initShop(id)\n    }\n\n    initShop(id) {\n        let self = this;\n        this.dailyBillService.getShopById(id)\n            .then(response => response.json())\n            .then(data => {\n                self.shop = data.object;\n                console.log(\"shop:\", self.shop)\n            }).catch(e => {\n                console.log(\"error get bill:\" + e);\n            })\n    }\n\n    updateShop() {\n        this.errorMessages = [];\n        let self = this;\n        this.dailyBillService.updateShop(this.shop)\n            .then(response => response.json())\n            .then(data => {\n                console.log(\"update shop result\");\n                console.log(data);\n                if(data.code == '200'){\n                    this.router.navigateToRoute('shop-list')\n                } else {\n                    self.errorMessages.push(data.message)\n                }\n            })\n    }\n}\n","import {DailyBillService} from \"../service/daily-bill-service\"\nimport {Router} from \"aurelia-router\"\nexport class ShopList {\n    static inject() {\n            return [DailyBillService, Router]\n    }\n    constructor(dailyBillService, router) {\n        this.dailyBillService = dailyBillService;\n        this.router = router;\n        this.initShops();\n        this.filterValue = \"\";\n    }\n\n    initShops() {\n        let self = this;\n        this.errorMessages = [];\n        this.dailyBillService.getAllShops()\n            .then(response => response.json())\n            .then(data => {\n                self.shops = data.object;\n                self.filteredShops = data.object;\n            }).catch(e => {\n                self.errorMessages.push(e)\n            })\n    }\n\n    editShop(id) {\n        this.router.navigateToRoute('shop-item', {id: id})\n    }\n\n    filterChange() {\n        console.log(\"filter shop changed\")\n        if(this.filterValue) {\n            this.filteredShops = this.shops.filter(it => it.name.toLowerCase().indexOf(this.filterValue.toLowerCase()) >= 0);\n        } else {\n            this.filteredShops = this.shops;\n        }\n    }\n}\n","import {bindable, bindingMode} from 'aurelia-framework';\nimport {DailyBillService} from \"../../service/daily-bill-service\"\nexport class EditBillItem {\n\n    @bindable billItem;\n    @bindable products;\n    @bindable shopId;\n    static inject() {\n        return [DailyBillService]\n    }\n    constructor(dailyBillService) {\n        console.log(\"add bill item constructor\")\n        this.dailyBillService = dailyBillService;\n    }\n\n    findLastPrice = (productId) => {\n        console.log('bill-item: find last price: ' + productId);\n        console.log(this.shopId);\n        if(this.shopId) {\n            let self = this;\n            return this.dailyBillService.findLastPrice(this.shopId, productId)\n                          .then(response => response.json())\n                          .then(data => {\n                              console.log('last price')\n                              console.log(data);\n                              let lastPrice = data.object;\n                              self.billItem.price = lastPrice ? lastPrice : 0;\n                              return data;\n                          });\n        }\n\n    }\n}\n","import {bindable, bindingMode} from 'aurelia-framework';\n\nexport class FilteredSelect {\n    @bindable selectedItem;\n    @bindable items;\n    @bindable callbackFn;\n    constructor() {\n    }\n    attached() {\n        if(this.items) {\n            this.filteredItems = this.items;\n        }\n        if(this.selectedItem) {\n            this.filterValue = this.selectedItem.name;\n        }\n    }\n\n    searchByFilterValue(it, filterValues) {\n        let condition = true;\n        for(let s of filterValues) {\n           condition = condition && it.name.toLowerCase().indexOf(s.toLowerCase()) >= 0;\n        }\n        return condition;\n    }\n\n    filterChange() {\n        if(this.filterValue) {\n            let delimeter = /\\s+/;\n            let filterValues = this.filterValue.split(delimeter).filter(i => i !== '');\n            this.filteredItems = this.items.filter(it => this.searchByFilterValue(it, filterValues))\n        } else {\n            this.filteredItems = this.items;\n        }\n        let value = this.items.find((element, index, array) => element.name.toLowerCase() === this.filterValue.toLowerCase())\n        if(value) {\n            this.selectedItem = value;\n            this.filterSelectedItem = value;\n        } else {\n            this.selectedItem = {\n                id: null,\n                name: this.filterValue\n            }\n        }\n    }\n\n    selectItem() {\n        console.log('select item')\n        this.filterValue = this.filterSelectedItem.name;\n        this.selectedItem = this.filterSelectedItem;\n        if(this.callbackFn) {\n            this.callbackFn(this.selectedItem.id);\n        }\n    }\n}\n"],"sourceRoot":"../src"}
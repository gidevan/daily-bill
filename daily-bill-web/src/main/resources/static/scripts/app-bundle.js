define("app",["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.App=function(){function t(){i(this,t)}return t.prototype.configureRouter=function(t,i){t.title="Daily Bill",t.map([{route:"",moduleId:"daily-bill/bill-list",title:"Bill List",name:"billList"},{route:"bill/:id",moduleId:"daily-bill/bill-details",name:"billDetails"},{route:"bill/add",moduleId:"daily-bill/add-bill",name:"addBill"},{route:"bill/edit/:id",moduleId:"daily-bill/add-bill",name:"editBill"},{route:"statistics-by-product",moduleId:"daily-bill/statistics-by-product",name:"statistics-by-product"},{route:"statistics-by-shop",moduleId:"daily-bill/statistics-by-shop",name:"statistics-by-shop"},{route:"product/list",moduleId:"daily-bill/product/product-list",name:"product-list"},{route:"product/edit/:id",moduleId:"daily-bill/product/product-item",name:"product-item"},{route:"shop/list",moduleId:"daily-bill/shop/shop-list",name:"shop-list"},{route:"shop/edit/:id",moduleId:"daily-bill/shop/shop-item",name:"shop-item"},{route:"currency/list",moduleId:"daily-bill/currency/currency-list",name:"currency-list"}]),this.router=i},t}()}),define("environment",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1,dailyBillUrl:window.location.origin}}),define("main",["exports","./environment"],function(t,i){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function l(t){t.use.standardConfiguration().feature("resources"),n.default.debug&&t.use.developmentLogging(),n.default.testing&&t.use.plugin("aurelia-testing"),t.start().then(function(){return t.setRoot()})}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=l;var n=e(i);Promise.config({warnings:{wForgottenReturn:!1}})}),define("daily-bill/add-bill",["exports","./service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AddBill=void 0;t.AddBill=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.activate=function(t,i){var e=this;this.routeConfig=i,console.log("activate add-bill"),console.log("params: ",t.id),this.changeCurrency=!1;var l=this;this.messages=[],this.dailyBillService.getShops().then(function(t){return t.json()}).then(function(t){return console.log("shops: "),console.log(t),l.shops=t.object,l.shops}).then(function(t){return l.dailyBillService.getProducts()}).then(function(t){return t.json()}).then(function(t){return console.log("products: "),console.log(t),console.log(t.object),l.products=t.object,l.products}).then(function(t){return l.dailyBillService.getAllCurrencies()}).then(function(t){return t.json()}).then(function(t){console.log("Currencies: "),console.log(t),l.currencies=t.object}).then(function(i){return t.id?l.dailyBillService.getBillById(t.id).then(function(t){return t.json()}).then(function(t){return console.log("bill: "),console.log(t.object),l.bill=t.object,l.initOpenBill(),console.log("bill date: "),console.log(l.bill.date),l.bill}):void e.createBill()}).catch(function(t){console.log("Error getting data"),console.log(t),l.shops=[],l.products=[]})},t.prototype.attached=function(){console.log("attached add-bill")},t.prototype.initOpenBill=function(){var t=new Date(this.bill.date);this.bill.dateStr=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},t.prototype.createBill=function(){var t=new Date,i=this.currencies.find(function(t){return 1==t.defaultCurrency});console.log("defaultCurrency",i),this.bill={id:null,date:t,dateStr:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),currency:i,shop:{shopId:null,shopName:""},items:[]},this.addBillItem()},t.prototype.addBillItem=function(){console.log("add bill item"),this.bill.items.push(this.createDefaultBillItem())},t.prototype.addBill=function(){var t=this;console.log("add bill:"),this.bill.date=Date.parse(this.bill.dateStr),console.log(this.bill),this.validateBill(),0==this.messages.length&&!function(){console.log("bill to save:"),console.log(t.bill);var i=t;t.dailyBillService.addBill(t.bill).then(function(t){return t.json()}).then(function(t){console.log(t),i.router.navigateToRoute("billList")})}()},t.prototype.validateBill=function(){this.messages=[],this.bill.shop.name||this.messages.push("Shop is empty")},t.prototype.updateBill=function(){console.log("update bill:"),this.bill.date=Date.parse(this.bill.dateStr),console.log(this.bill);var t=this;this.dailyBillService.updateBill(this.bill).then(function(t){return t.json()}).then(function(i){console.log(i),t.router.navigateToRoute("billList")})},t.prototype.createDefaultBillItem=function(){return{product:{productId:null,productName:null},price:0,amount:1}},t}()}),define("daily-bill/bill-details",["exports","./service/daily-bill-service","aurelia-fetch-client","aurelia-router"],function(t,i,e,l){"use strict";function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BillDetails=void 0;t.BillDetails=function(){function t(i,e){n(this,t),this.dailyBillService=i,this.router=e}return t.inject=function(){return[i.DailyBillService,l.Router]},t.prototype.activate=function(t,i){this.routeConfig=i;var e=this;return this.dailyBillService.getBillById(t.id).then(function(t){return t.json()}).then(function(t){console.log("bill: "),console.log(t.object),e.bill=t.object;var i=new Date(t.object.date);e.bill.dateStr=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),e.bill.billSum=0,e.bill.items.forEach(function(t){e.bill.billSum+=t.price*t.amount})})},t.prototype.edit=function(){this.router.navigateToRoute("editBill",{id:this.bill.id})},t}()}),define("daily-bill/bill-list",["exports","./service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BillList=void 0;t.BillList=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e;var n=new Date;this.startDateStr=n.getFullYear()+"-"+(n.getMonth()+1)+"-1",this.endDateStr=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.activate=function(t,i){this.findBills()},t.prototype.viewBillDetails=function(t){console.log("viewBillDetails: "+t),this.router.navigateToRoute("billDetails",{id:t})},t.prototype.findBills=function(){var t=Date.parse(this.startDateStr),i=Date.parse(this.endDateStr);this.params={startPeriodDate:t,endPeriodDate:i};var e=this;console.log("params get bill"),console.log(this.params),this.dailyBillService.getBills(this.params).then(function(t){return t.json()}).then(function(t){console.log(t),e.bills=t.object,e.bills.forEach(function(t){var i=new Date(t.date);t.dateStr=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()})})},t}()}),define("daily-bill/statistics-by-product",["exports","./service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.StatisticsByProduct=void 0;t.StatisticsByProduct=function(){function t(i,e){l(this,t),console.log("Init statistics by product module"),this.dailyBillService=i,this.router=e;var n=new Date;this.params={startPeriodDate:new Date(n.getFullYear(),n.getMonth(),1),endPeriodDate:n},this.productNames=[{name:""}],this.startDateStr=n.getFullYear()+"-"+(n.getMonth()+1)+"-1",this.endDateStr=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),this.selectedCurrency=null,this.currencies=[],this.fullStatiscicInfo=null,this.statisticsByProduct=[]}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.activate=function(t,i){this.getStatisticsByProduct(this.params)},t.prototype.getStatisticsByProduct=function(t){var i=this.productNames.map(function(t){return t.name}).filter(function(t){return t});t.productNames=i,console.log(t),this.statisticsByProduct={};var e=this;this.dailyBillService.getStatisticByProduct(t).then(function(t){return t.json()}).then(function(t){console.log(t),e.fullStatisticInfo=t.object;var i=e.fullStatisticInfo.currencies;if(i.length>0){if(e.currencies=i.map(function(t){return{name:t,active:!1}}),e.selectedCurrency){var l=!1;e.currencies.forEach(function(t){t.name==e.selectedCurrency&&(t.active=!0,l=!0)}),l||(e.selectedCurrency=e.currencies[0].name,e.currencies[0].active=!0)}else e.selectedCurrency=e.currencies[0].name,e.currencies[0].active=!0;e.statisticsByProduct=e.fullStatisticInfo.statisticInfo[e.selectedCurrency],e.statisticsByProduct.statisticDetails.map(function(t){return t.active=!0,t}),e.statisticsByProduct.allEnabled=!0,e.statisticsByProduct.totalSumCalculated=e.statisticsByProduct.totalSum}})},t.prototype.updateStatistics=function(){var t=Date.parse(this.startDateStr),i=Date.parse(this.endDateStr);this.params={startPeriodDate:t,endPeriodDate:i},this.getStatisticsByProduct(this.params)},t.prototype.changeCurrency=function(t){this.currencies.forEach(function(i){return i.name!=t.name?i.active=!1:i.active=!0}),this.selectedCurrency=t.name,this.updateStatistics()},t.prototype.switchItem=function(t){t.active=!t.active,this.statisticsByProduct.totalSumCalculated=t.active?this.statisticsByProduct.totalSumCalculated+t.price:this.statisticsByProduct.totalSumCalculated-t.price},t.prototype.addProductName=function(){this.productNames.push({name:""})},t.prototype.switchItems=function(){this.statisticsByProduct.allEnabled=!this.statisticsByProduct.allEnabled,this.statisticsByProduct.totalSumCalculated=this.statisticsByProduct.allEnabled?this.statisticsByProduct.totalSum:0;var t=this;this.statisticsByProduct.statisticDetails.map(function(i){i.active=t.statisticsByProduct.allEnabled})},t}()}),define("daily-bill/statistics-by-shop",["exports","./service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.StatisticsByShop=void 0;t.StatisticsByShop=function(){function t(i,e){l(this,t),console.log("Init statistics by shop module"),this.dailyBillService=i,this.router=e;var n=new Date;this.params={startPeriodDate:new Date(n.getFullYear(),n.getMonth(),1),endPeriodDate:n},this.shopNames=[{name:""}],this.startDateStr=n.getFullYear()+"-"+(n.getMonth()+1)+"-1",this.endDateStr=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),this.selectedCurrency=null,this.currencies=[],this.fullStatiscicInfo=null,this.statisticsByShop=[]}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.activate=function(t,i){this.getStatisticsByShop(this.params)},t.prototype.getStatisticsByShop=function(t){var i=this.shopNames.map(function(t){return t.name}).filter(function(t){return t});t.shopNames=i,console.log(t),this.statisticsByShop={};var e=this;this.dailyBillService.getStatisticByShop(t).then(function(t){return t.json()}).then(function(t){console.log(t),e.fullStatisticInfo=t.object;var i=e.fullStatisticInfo.currencies;if(i.length>0){if(e.currencies=i.map(function(t){return{name:t,active:!1}}),e.selectedCurrency){var l=!1;e.currencies.forEach(function(t){t.name==e.selectedCurrency&&(t.active=!0,l=!0)}),l||(e.selectedCurrency=e.currencies[0].name,e.currencies[0].active=!0)}else e.selectedCurrency=e.currencies[0].name,e.currencies[0].active=!0;e.statisticsByShop=e.fullStatisticInfo.statisticInfo[e.selectedCurrency],e.statisticsByShop.statisticDetails.map(function(t){return t.active=!0,t}),e.statisticsByShop.allEnabled=!0,e.statisticsByShop.totalSumCalculated=e.statisticsByShop.totalSum}})},t.prototype.updateStatistics=function(){var t=Date.parse(this.startDateStr),i=Date.parse(this.endDateStr);this.params={startPeriodDate:t,endPeriodDate:i},this.getStatisticsByShop(this.params)},t.prototype.changeCurrency=function(t){this.currencies.forEach(function(i){return i.name!=t.name?i.active=!1:i.active=!0}),this.selectedCurrency=t.name,this.updateStatistics()},t.prototype.switchItem=function(t){t.active=!t.active,this.statisticsByShop.totalSumCalculated=t.active?this.statisticsByShop.totalSumCalculated+t.price:this.statisticsByShop.totalSumCalculated-t.price},t.prototype.addShopName=function(){this.shopNames.push({name:""})},t.prototype.switchItems=function(){this.statisticsByShop.allEnabled=!this.statisticsByShop.allEnabled,this.statisticsByShop.totalSumCalculated=this.statisticsByShop.allEnabled?this.statisticsByShop.totalSum:0;var t=this;this.statisticsByShop.statisticDetails.map(function(i){i.active=t.statisticsByShop.allEnabled})},t}()}),define("resources/index",["exports"],function(t){"use strict";function i(t){}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=i}),define("daily-bill/currency/currency-list",["exports","../service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CurrencyList=void 0;t.CurrencyList=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e,this.initCurrencies()}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.initCurrencies=function(){var t=this;this.currencies=[],this.dailyBillService.getAllCurrencies().then(function(t){return t.json()}).then(function(i){t.currencies=i.object}).catch(function(i){t.errorMessages.push(i)})},t.prototype.editCurrency=function(t){console.log("edit currency: "+t)},t}()}),define("daily-bill/product/product-item",["exports","../service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ProductItem=void 0;t.ProductItem=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.activate=function(t,i){var e=t.id;this.initProduct(e)},t.prototype.initProduct=function(t){this.errorMessages=[];var i=this;this.dailyBillService.getProductById(t).then(function(t){return t.json()}).then(function(t){i.product=t.object,console.log("product:",i.product)}).catch(function(t){console.log("error get bill:"+t)})},t.prototype.updateProduct=function(){var t=this;this.errorMessages=[];var i=this;this.dailyBillService.updateProduct(this.product).then(function(t){return t.json()}).then(function(e){console.log("update product result"),console.log(e),"200"==e.code?t.router.navigateToRoute("product-list"):i.errorMessages.push(e.message)})},t}()}),define("daily-bill/product/product-list",["exports","../service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ProductList=void 0;t.ProductList=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e,this.initProducts(),this.filterValue=""}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.initProducts=function(){var t=this;this.errorMessages=[],this.products=[],this.filteredProducts=[],this.dailyBillService.getAllProducts().then(function(t){return t.json()}).then(function(i){t.products=i.object,t.filteredProducts=i.object}).catch(function(i){t.errorMessages.push(i)})},t.prototype.editProduct=function(t){this.router.navigateToRoute("product-item",{id:t})},t.prototype.filterChange=function(){var t=this;this.filterValue?this.filteredProducts=this.products.filter(function(i){return i.name.toLowerCase().indexOf(t.filterValue.toLowerCase())>=0}):this.filteredProducts=this.products},t}()}),define("daily-bill/service/daily-bill-service",["exports","aurelia-fetch-client","../../environment"],function(t,i,e){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DailyBillService=void 0;var s=l(e),o=new i.HttpClient;t.DailyBillService=function(){function t(){n(this,t),console.log("environment:"+s.default.dailyBillUrl)}return t.prototype.getBills=function(t){return console.log("Get bills"),o.fetch(s.default.dailyBillUrl+"/daily-bill/bills",{method:"POST",body:(0,i.json)(t)})},t.prototype.getBillById=function(t){return console.log("Get bill by id: "+t),o.fetch(s.default.dailyBillUrl+"/daily-bill/bill/"+t)},t.prototype.addBill=function(t){return o.fetch(s.default.dailyBillUrl+"/daily-bill/add",{method:"PUT",body:(0,i.json)(t)})},t.prototype.updateBill=function(t){return o.fetch(s.default.dailyBillUrl+"/daily-bill/edit",{method:"POST",body:(0,i.json)(t)})},t.prototype.getShops=function(){return o.fetch(s.default.dailyBillUrl+"/daily-bill/shops")},t.prototype.getProducts=function(){return o.fetch(s.default.dailyBillUrl+"/daily-bill/products")},t.prototype.getStatisticByProduct=function(t){var e=s.default.dailyBillUrl+"/daily-bill/statistics/product";return console.log("url: "+e),o.fetch(e,{method:"POST",body:(0,i.json)(t)})},t.prototype.getStatisticByShop=function(t){var e=s.default.dailyBillUrl+"/daily-bill/statistics/shop";return o.fetch(e,{method:"POST",body:(0,i.json)(t)})},t.prototype.findLastPrice=function(t,i){return o.fetch(s.default.dailyBillUrl+"/daily-bill/last/price/shop/"+t+"/product/"+i)},t.prototype.getAllShops=function(){return o.fetch(s.default.dailyBillUrl+"/shops/all")},t.prototype.getShopById=function(t){return o.fetch(s.default.dailyBillUrl+"/shops/"+t)},t.prototype.updateShop=function(t){return o.fetch(s.default.dailyBillUrl+"/shops",{method:"POST",body:(0,i.json)(t)})},t.prototype.getAllProducts=function(){return o.fetch(s.default.dailyBillUrl+"/products/all")},t.prototype.getProductById=function(t){return o.fetch(s.default.dailyBillUrl+"/products/"+t)},t.prototype.updateProduct=function(t){return o.fetch(s.default.dailyBillUrl+"/products",{method:"POST",body:(0,i.json)(t)})},t.prototype.getAllCurrencies=function(){return o.fetch(s.default.dailyBillUrl+"/currency/all")},t}()}),define("daily-bill/shop/shop-item",["exports","../service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ShopItem=void 0;t.ShopItem=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e,this.errorMessages=[]}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.activate=function(t,i){var e=t.id;this.initShop(e)},t.prototype.initShop=function(t){var i=this;this.dailyBillService.getShopById(t).then(function(t){return t.json()}).then(function(t){i.shop=t.object,console.log("shop:",i.shop)}).catch(function(t){console.log("error get bill:"+t)})},t.prototype.updateShop=function(){var t=this;this.errorMessages=[];var i=this;this.dailyBillService.updateShop(this.shop).then(function(t){return t.json()}).then(function(e){console.log("update shop result"),console.log(e),"200"==e.code?t.router.navigateToRoute("shop-list"):i.errorMessages.push(e.message)})},t}()}),define("daily-bill/shop/shop-list",["exports","../service/daily-bill-service","aurelia-router"],function(t,i,e){"use strict";function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ShopList=void 0;t.ShopList=function(){function t(i,e){l(this,t),this.dailyBillService=i,this.router=e,this.initShops(),this.filterValue=""}return t.inject=function(){return[i.DailyBillService,e.Router]},t.prototype.initShops=function(){var t=this;this.errorMessages=[],this.dailyBillService.getAllShops().then(function(t){return t.json()}).then(function(i){t.shops=i.object,t.filteredShops=i.object}).catch(function(i){t.errorMessages.push(i)})},t.prototype.editShop=function(t){this.router.navigateToRoute("shop-item",{id:t})},t.prototype.filterChange=function(){var t=this;console.log("filter shop changed"),this.filterValue?this.filteredShops=this.shops.filter(function(i){return i.name.toLowerCase().indexOf(t.filterValue.toLowerCase())>=0}):this.filteredShops=this.shops},t}()}),define("daily-bill/components/bill-item/edit-bill-item",["exports","aurelia-framework","../../service/daily-bill-service"],function(t,i,e){"use strict";function l(t,i,e,l){e&&Object.defineProperty(t,i,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(l):void 0})}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i,e,l,n){var s={};return Object.keys(l).forEach(function(t){s[t]=l[t]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=e.slice().reverse().reduce(function(e,l){return l(t,i,e)||e},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,i,s),s=null),s}Object.defineProperty(t,"__esModule",{value:!0}),t.EditBillItem=void 0;var o,a,r,c,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.EditBillItem=(o=function(){function t(i){var e=this;n(this,t),l(this,"billItem",a,this),l(this,"products",r,this),l(this,"shopId",c,this),this.findLastPrice=function(t){if(console.log("bill-item: find last price: "+t),console.log(e.shopId),e.shopId){var i=function(){var i=e;return{v:e.dailyBillService.findLastPrice(e.shopId,t).then(function(t){return t.json()}).then(function(t){console.log("last price"),console.log(t);var e=t.object;return i.billItem.price=e?e:0,t})}}();if("object"===("undefined"==typeof i?"undefined":d(i)))return i.v}},console.log("add bill item constructor"),this.dailyBillService=i}return t.inject=function(){return[e.DailyBillService]},t}(),a=s(o.prototype,"billItem",[i.bindable],{enumerable:!0,initializer:null}),r=s(o.prototype,"products",[i.bindable],{enumerable:!0,initializer:null}),c=s(o.prototype,"shopId",[i.bindable],{enumerable:!0,initializer:null}),o)}),define("daily-bill/components/filtered-select/filtered-select",["exports","aurelia-framework"],function(t,i){"use strict";function e(t,i,e,l){e&&Object.defineProperty(t,i,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(l):void 0})}function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i,e,l,n){var s={};return Object.keys(l).forEach(function(t){s[t]=l[t]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=e.slice().reverse().reduce(function(e,l){return l(t,i,e)||e},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,i,s),s=null),s}Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredSelect=void 0;var s,o,a,r;t.FilteredSelect=(s=function(){function t(){l(this,t),e(this,"selectedItem",o,this),e(this,"items",a,this),e(this,"callbackFn",r,this)}return t.prototype.attached=function(){this.items&&(this.filteredItems=this.items),this.selectedItem&&(this.filterValue=this.selectedItem.name)},t.prototype.searchByFilterValue=function(t,i){for(var e=!0,l=i,n=Array.isArray(l),s=0,l=n?l:l[Symbol.iterator]();;){var o;if(n){if(s>=l.length)break;o=l[s++]}else{if(s=l.next(),s.done)break;o=s.value}var a=o;e=e&&t.name.toLowerCase().indexOf(a.toLowerCase())>=0}return e},t.prototype.filterChange=function(){var t=this;this.filterValue?!function(){var i=/\s+/,e=t.filterValue.split(i).filter(function(t){return""!==t});t.filteredItems=t.items.filter(function(i){return t.searchByFilterValue(i,e)})}():this.filteredItems=this.items;var i=this.items.find(function(i,e,l){return i.name.toLowerCase()===t.filterValue.toLowerCase()});i?(this.selectedItem=i,this.filterSelectedItem=i):this.selectedItem={id:null,name:this.filterValue}},t.prototype.selectItem=function(){console.log("select item"),this.filterValue=this.filterSelectedItem.name,this.selectedItem=this.filterSelectedItem,this.callbackFn&&this.callbackFn(this.selectedItem.id)},t}(),o=n(s.prototype,"selectedItem",[i.bindable],{enumerable:!0,initializer:null}),a=n(s.prototype,"items",[i.bindable],{enumerable:!0,initializer:null}),r=n(s.prototype,"callbackFn",[i.bindable],{enumerable:!0,initializer:null}),s)}),define("text!app.html",["module"],function(t){t.exports='<template><require from="./css/daily-bill.css"></require><nav role="navigation"><div><a href="#"><span>Bills</span> </a><span>|</span> <a route-href="route: addBill"><span>Add Bill</span> </a><span>|</span> <a route-href="route: statistics-by-product"><span>Statistics by product</span> </a><span>|</span> <a route-href="route: statistics-by-shop"><span>Statistics by shop</span> </a><span>|</span> <a route-href="route: product-list"><span>Product list</span> </a><span>|</span> <a route-href="route: shop-list"><span>Shop list</span> </a><span>|</span> <a route-href="route: currency-list"><span>Currency list</span></a></div></nav><div class="container"><router-view></router-view></div></template>'}),define("text!css/daily-bill.css",["module"],function(t){t.exports="\n.bill-list .bill {\n  border: 1px solid black;\n  margin: 1px;\n}\n\n.bill-list .bill .bill-info>span {\n  font-weight: bolder;\n}\n\n.shop-info {\n  display: flex;\n  flex-direction: row;\n}\n.item{\n  border: 1px solid black;\n  margin: 2px;\n}\n\n.bill-item-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.shop-info > p, .bill-item-info >p{\n  font-weight: bolder;\n  width: 20%;\n}\n.shop-info > input, .shop-info > filtered-select {\n    width: 75%\n}\n.bill-item {\n  display: flex;\n  flex-direction: row;\n  border: 1px solid black;\n  margin: 1px;\n  padding: 1px;\n}\n.bill-item .item-description {\n  font-weight: bolder;\n  margin-right: 2px;\n  margin-left: 2px;\n  width: 20%;\n}\n.bill-item-info > input {\n    width: 75%;\n}\n.bill-item-info > filtered-select {\n    width: 75%;\n}\n.item-button-panel button {\n    width: 100%;\n    font-size: 24px;\n    margin: 2px;\n}\n.bill-button-panel button {\n  width: 100%;\n  font-size: 24px;\n  margin: 2px;\n}\n\n.bill-details {\n    border: 1px solid black;\n}\n\n.bill-details .bill-info {\n    margin: 2px;\n    padding-bottom: 3px;\n    font-size: 20px;\n\n}\n\n.bill-details .bill-info .bill-info-item {\n    display: flex;\n    flex-direction: row;\n}\n\n.bill-details .bill-info .bill-info-item .bill-info-description {\n    font-weight: bolder;\n    width: 20%;\n}\n.bill-items .bill-item {\n    display: flex;\n    flex-direction: column;\n}\n\n.bill-items .bill-item .bill-item-info-data  {\n    display: flex;\n    flex-direction: row;\n}\n\n.statistics-item {\n    border: 1px solid black;\n    margin: 2px;\n    padding: 2px;\n    display: flex;\n    flex-direction: row;\n}\n\n.statistics-item .name {\n    font-weight: bolder;\n    margin-right: 5px;\n}\n\n.statistics-item .switch-item-button {\n    border: 1px solid black;\n    margin-left:auto;\n    margin-right:0;\n    width: 40px;\n    height: 20px;\n}\n\n.statistics-item .active {\n    background-color: rgb(204, 204, 204);\n}\n.statistics-button-panel .name-filter {\n    display: flex;\n    flex-direction: row;\n}\n\n.statistics-button-panel .date-filter, .statistics-button-panel .date-filter > div {\n    display: flex;\n    flex-direction: row;\n}\n\n.statistics-button-panel .filter-field,  .bill-list-button-panel .filter-field {\n    margin: 2px;\n}\n\n.statistics-button-panel .filter-field .filter-title, .bill-list-button-panel .filter-field .filter-title {\n    font-weight: bolder;\n}\n\n.statistics-button-panel .add-product-button {\n    width: 100%;\n    font-weight: bolder;\n    padding: 2px;\n    margin: 2px;\n}\n\n.statistics-button-panel .edit-bill-button {\n    width: 100%;\n    font-weight: bolder;\n    padding: 2px;\n    margin: 2px;\n    height: 40px;\n}\n\n.total-sum {\n    display: flex;\n    flex-direction: row;\n    margin: 3px;\n}\n\n.total-sum .title {\n    font-weight: bolder;\n    margin-right: 5px;\n}\n\n.select-button .enable-button {\n    border: 1px solid black;\n}\n\n.filtered-select {\n    display: flex;\n    flex-direction: column;\n}\n\n.bill-list-button-panel {\n    display: flex;\n    flex-direction: row;\n}\n.bill-list-button-panel .filter-field {\n    display: flex;\n    flex-direction: row;\n}\n.bill-list-button-panel .edit-bill-button {\n    font-weight: bolder;\n    padding: 2px;\n    margin: 2px;\n    width: 20%;\n}\n\n.shop-list .shop-item, .product-list .product-item {\n    border: 1px solid black;\n    margin-top: 1px;\n}\n\n.shop-list .shop-info > span, .product-list .product-info > span {\n    font-weight: bolder;\n}\n\n.shop-details .shop-info > span, .product-details .product-info > span {\n    font-weight: bolder;\n}\n\n.error-messages p {\n    color : red;\n}\n\n.product-filter .filter-value > input, .shop-filter .filter-value > input{\n    width: 100%;\n}\n\n.currency-button-panel {\n    display: flex;\n    flex-direction: row;\n}\n.currency-button-panel .currency-button {\n    border: 1px solid grey;\n    margin: 2px;\n    padding: 2px;\n    width: 30%;\n}\n\n.currency-button-panel .currency-button-active {\n    font-weight: bolder;\n    background: grey;\n}\n\n\n"}),define("text!daily-bill/add-bill.html",["module"],function(t){t.exports='<template><require from="./components/filtered-select/filtered-select"></require><require from="./components/bill-item/edit-bill-item"></require><div if.bind="bill"><h1>Add Bill</h1><div class="error-messages"><p repeat.for="msg of messages">${msg}</p></div><div class="shop-info"><p>Shop name:</p><filtered-select items.two-way="shops" selected-item.two-way="bill.shop"></filtered-select></div><div class="shop-info"><p>Date:</p><input type="text" value.bind="bill.dateStr"></div><div class="shop-info"><p>Change currency:</p><input type="checkbox" checked.bind="changeCurrency"></div><div class="shop-info" if.bind="!!changeCurrency"><p>Currency:</p><filtered-select items.two-way="currencies" selected-item.two-way="bill.currency"></filtered-select></div><div class="shop-info" if.bind="!changeCurrency"><p>Currency:</p><input type="text" disabled="disabled" value.bind="bill.currency.code"></div><div class="bill-items"><div class="item" repeat.for="billItem of bill.items"><edit-bill-item bill-item.two-way="billItem" products.two-way="products" shop-id.two-way="bill.shop.id"></edit-bill-item></div><div class="item-button-panel"><button type="button" click.delegate="addBillItem()">Add item</button></div></div><div class="bill-button-panel" if.bind="!bill.id"><button type="button" click.delegate="addBill()">Add bill</button></div><div class="bill-button-panel" if.bind="bill.id"><button type="button" click.delegate="updateBill()">Update bill</button></div></div></template>'}),define("text!daily-bill/bill-details.html",["module"],function(t){t.exports='<template><div class="bill-details"><div class="bill-info"><div class="bill-info-item"><div class="bill-info-description">bill id:</div><div class="bill-info-item">${bill.id}</div></div><div class="bill-info-item"><div class="bill-info-description">date:</div><div class="bill-info-item">${bill.dateStr}</div></div><div class="bill-info-item"><div class="bill-info-description">shop id:</div><div class="bill-info-item">${bill.shop.id}</div></div><div class="bill-info-item"><div class="bill-info-description">shop:</div><div class="bill-info-item">${bill.shop.name}</div></div><div class="bill-info-item"><div class="bill-info-description">currency:</div><div class="bill-info-item">${bill.currency.code}</div></div><div class="bill-info-item"><div class="bill-info-description">bill sum:</div><div class="bill-info-item">${bill.billSum}</div></div></div><div class="bill-items"><div class="bill-item" repeat.for="item of bill.items"><div class="bill-item-info-data"><div class="item-description">product id:</div><div class="item-value">${item.product.id}</div></div><div class="bill-item-info-data"><div class="item-description">product:</div><div class="item-value">${item.product.name}</div></div><div class="bill-item-info-data"><div class="item-description">price:</div><div class="item-value">${item.price}</div></div><div class="bill-item-info-data"><div class="item-description">amount:</div><div class="item-value">${item.amount}</div></div><div class="bill-item-info-data"><div class="item-description">sum:</div><div class="item-value">${item.amount * item.price}</div></div></div></div></div><div class="bill-button-panel"><button class="edit-bill-button" click.delegate="edit()">Edit bill</button></div></template>';
}),define("text!daily-bill/bill-list.html",["module"],function(t){t.exports='<template><h1>Bill List</h1><div class="bill-list-button-panel"><div class="filter-field"><div class="filter-title">Start Period Date:</div><div><input type="text" value.bind="startDateStr"></div></div><div class="filter-field"><div class="filter-title">End Period Date:</div><div><input type="text" value.bind="endDateStr"></div></div><button class="edit-bill-button" click.delegate="findBills()">Find</button></div><div class="bill-list"><div repeat.for="bill of bills" class="bill" click.delegate="viewBillDetails(bill.id)"><div class="bill-info"><span>id:</span> ${bill.id}</div><div class="bill-info"><span>shop:</span> ${bill.shopName}</div><div class="bill-info"><span>date:</span> ${bill.dateStr}</div><div class="bill-info"><span>currency:</span> ${bill.currency.code}</div><div class="bill-info"><span>sum:</span> ${bill.billSum}</div></div></div></template>'}),define("text!daily-bill/statistics-by-product.html",["module"],function(t){t.exports='<template>Statistics by product:<div class="statistics-button-panel"><div class="date-filter"><div class="filter-field"><div class="filter-title">Start Period Date:</div><div><input type="text" value.bind="startDateStr"></div></div><div class="filter-field"><div class="filter-title">End Period Date:</div><div><input type="text" value.bind="endDateStr"></div></div></div><div class="name-filter"><div class="filter-field" repeat.for="productName of productNames"><div class="filter-title">Product Name:</div><div><input type="text" value.bind="productName.name"></div></div><button class="add-product-button" click.delegate="addProductName()">Add product name</button></div><button class="edit-bill-button" click.delegate="updateStatistics()">Update statistics</button><div class="currency-button-panel"><div repeat.for="currency of currencies" class="currency-button ${currency.active ? \'currency-button-active\' :\'\'}" click.delegate="changeCurrency(currency)">${currency.name}</div></div></div><div class="total-sum"><div class="title">Total Sum:</div><div>${statisticsByProduct.totalSum}</div></div><div class="total-sum"><div class="title">Total Sum Selected Items:</div><div>${statisticsByProduct.totalSumCalculated}</div></div><div class="total-sum"><div class="title">Total Sum Unselected Items:</div><div>${statisticsByProduct.totalSum - statisticsByProduct.totalSumCalculated}</div></div><div class="select-button"><div class="enable-button" click.delegate="switchItems()">all enabled: ${statisticsByProduct.allEnabled}</div></div><div repeat.for="statistics of statisticsByProduct.statisticDetails" class="statistics-item"><div class="name">${statistics.name}:</div><div class="value">${statistics.price}</div><div class="switch-item-button ${statistics.active ? \'active\' : \'\'}" click.delegate="switchItem(statistics)"></div></div><template></template></template>'}),define("text!daily-bill/statistics-by-shop.html",["module"],function(t){t.exports='<template>Statistics by shop:<div class="statistics-button-panel"><div class="date-filter"><div class="filter-field"><div class="filter-title">Start Period Date:</div><div><input type="text" value.bind="startDateStr"></div></div><div class="filter-field"><div class="filter-title">End Period Date:</div><div><input type="text" value.bind="endDateStr"></div></div></div><div class="name-filter"><div class="filter-field" repeat.for="shopName of shopNames"><div class="filter-title">Shop Name:</div><div><input type="text" value.bind="shopName.name"></div></div><button class="add-product-button" click.delegate="addShopName()">Add shop name</button></div><button class="edit-bill-button" click.delegate="updateStatistics()">Update statistics</button><div class="currency-button-panel"><div repeat.for="currency of currencies" class="currency-button ${currency.active ? \'currency-button-active\' :\'\'}" click.delegate="changeCurrency(currency)">${currency.name}</div></div></div><div class="total-sum"><div class="title">Total Sum:</div><div>${statisticsByShop.totalSum}</div></div><div class="total-sum"><div class="title">Total Sum Selected Items:</div><div>${statisticsByShop.totalSumCalculated}</div></div><div class="total-sum"><div class="title">Total Sum Unselected Items:</div><div>${statisticsByShop.totalSum - statisticsByShop.totalSumCalculated}</div></div><div class="select-button"><div class="enable-button" click.delegate="switchItems()">all enabled: ${statisticsByShop.allEnabled}</div></div><div repeat.for="statistics of statisticsByShop.statisticDetails" class="statistics-item"><div class="name">${statistics.name}:</div><div class="value">${statistics.price}</div><div class="switch-item-button ${statistics.active ? \'active\' : \'\'}" click.delegate="switchItem(statistics)"></div></div><template></template></template>'}),define("text!daily-bill/currency/currency-list.html",["module"],function(t){t.exports='<template><h2>Product list</h2><div class="error-messages"><p repeat.for="msg of errorMessages">${msg}</p></div><div class="product-list"><div repeat.for="currency of currencies" class="product-item" click.delegate="editCurrency(currency.id)"><div class="product-info"><span>id:</span> ${currency.id}</div><div class="product-info"><span>code:</span> ${currency.code}</div><div class="product-info"><span>name:</span> ${currency.name}</div><div class="product-info"><span>defaultCurrency:</span> ${currency.defaultCurrency}</div></div></div></template>'}),define("text!daily-bill/product/product-item.html",["module"],function(t){t.exports='<template><h2>Product Item</h2><div class="error-messages"><p repeat.for="msg of errorMessages">${msg}</p></div><div class="product-details"><div class="product-info"><span>id:</span> ${product.id}</div><div class="product-info"><span>name:</span> <input type="text" value.bind="product.name"></div><div class="product-info"><span>active:</span> <input type="checkbox" checked.bind="product.active"></div></div><div class="bill-button-panel"><button type="button" click.delegate="updateProduct()">Update product</button></div></template>'}),define("text!daily-bill/product/product-list.html",["module"],function(t){t.exports='<template><h2>Product list</h2><div class="error-messages"><p repeat.for="msg of errorMessages">${msg}</p></div><div class="product-filter"><div class="filter-value"><input type="text" value.bind="filterValue" change.delegate="filterChange()"></div></div><div class="product-list"><div repeat.for="product of filteredProducts" class="product-item" click.delegate="editProduct(product.id)"><div class="product-info"><span>id:</span> ${product.id}</div><div class="product-info"><span>name:</span> ${product.name}</div><div class="product-info"><span>active:</span> ${product.active}</div></div></div></template>'}),define("text!daily-bill/shop/shop-item.html",["module"],function(t){t.exports='<template><h2>Shop Item</h2><div class="error-messages"><p repeat.for="msg of errorMessages">${msg}</p></div><div class="shop-details"><div class="shop-info"><span>id:</span> ${shop.id}</div><div class="shop-info"><span>name:</span> <input type="text" value.bind="shop.name"></div><div class="shop-info"><span>active:</span> <input type="checkbox" checked.bind="shop.active"></div></div><div class="bill-button-panel"><button type="button" click.delegate="updateShop()">Update shop</button></div></template>'}),define("text!daily-bill/shop/shop-list.html",["module"],function(t){t.exports='<template><h2>Shop list:</h2><div class="error-messages"><p repeat.for="msg of errorMessages">${msg}</p></div><div class="shop-filter"><div class="filter-value"><input type="text" value.bind="filterValue" change.delegate="filterChange()"></div></div><div class="shop-list"><div repeat.for="shop of filteredShops" class="shop-item" click.delegate="editShop(shop.id)"><div class="shop-info"><span>id:</span> ${shop.id}</div><div class="shop-info"><span>name:</span> ${shop.name}</div><div class="shop-info"><span>active:</span> ${shop.active}</div></div></div></template>'}),define("text!daily-bill/components/bill-item/edit-bill-item.html",["module"],function(t){t.exports='<template><require from="../filtered-select/filtered-select"></require><div class="bill-item-info"><p>Product:</p><filtered-select items.two-way="products" selected-item.two-way="billItem.product" callback-fn.two-way="findLastPrice"></filtered-select></div><div class="bill-item-info"><p>Price:</p><input type="text" value.bind="billItem.price"></div><div class="bill-item-info"><p>Amount:</p><input type="text" value.bind="billItem.amount"></div></template>'}),define("text!daily-bill/components/filtered-select/filtered-select.html",["module"],function(t){t.exports='<template><div class="filtered-select"><input type="text" value.bind="filterValue" change.delegate="filterChange()"><select value.bind="filterSelectedItem" change.delegate="selectItem()" size="6"><option repeat.for="it of filteredItems" model.bind="it">${it.name}</option></select></div></template>'});